在氚燃料循环的模拟与分析中，评估系统的经济性和可持续性至关重要。`tricys` 内置了一系列核心性能指标（Key Performance Indicators, KPIs），用于从动态仿真结果中量化评估系统的关键特性。


## 1. 启动库存 

- **计算函数**: `calculate_startup_inventory`
- **物理意义**: 启动库存是指在反应堆启动初期，为了维持连续运行直至系统达到氚自持（即氚的增殖速率等于或超过其消耗速率）而必须预先投入的氚量。在氚库存随时间变化的曲线上，这表现为从初始库存下降到最低点（拐点）的垂直距离。
- **计算方法**:
    1.  在仿真时间序列中，找到氚库存的最低点（Turning Point），这个点通常代表系统从净消耗转为净增殖的时刻。
    2.  启动库存被计算为 **初始库存** 与 **最低库存** 之间的差值。
    
    `Startup Inventory = Initial Inventory - Minimum Inventory`
- **解读**: 启动库存是一个关键的经济性指标。**较低的启动库存**意味着系统能更快地达到自持，减少了对外部氚源的依赖和前期投入成本，是氚燃料循环系统设计的优化目标之一。

## 2. 自持时间 

- **计算函数**: `time_of_turning_point`
- **物理意义**: 自持时间是指系统从启动开始，到其总氚库存量达到最低点并开始回升的时刻。这个时间点标志着系统内部的氚增殖速率开始超过消耗和损失速率，系统在理论上实现了“自给自足”。
- **计算方法**:
    1.  该函数首先对库存数据进行平滑处理，以消除噪声干扰，判断是否存在一个真实的“拐点”。
    2.  如果库存曲线是单调下降的（意味着在整个仿真时间内都未达到自持），则返回 `NaN` (Not a Number)。
    3.  否则，它会返回原始（未平滑的）数据中库存量达到最小值的精确时间点。
- **解读**: 自持时间直接反映了系统达到氚平衡的速度。**更短的自持时间**是理想的，因为它表明系统能更快地摆脱对启动库存的消耗，并开始积累氚，这对快速启动商业聚变电站至关重要。

## 3. 倍增时间 

- **计算函数**: `calculate_doubling_time`
- **物理意义**: 倍增时间是指在达到氚自持之后，系统内总氚库存量翻倍（即达到初始库存量的两倍）所需的时间。
- **计算方法**:
    1.  首先，确定系统的“拐点”（库存最低点）。
    2.  然后，在拐点之后的库存数据中，寻找第一个时间点，该点库存量大于或等于 **初始库存的两倍**。
    3.  倍增时间就是这个时间点与仿真开始时间之差。如果库存从未达到初始值的两倍，则返回 `NaN`。
- **解读**: 倍增时间是衡量氚增殖系统“盈利能力”的核心指标。一个有限且合理的倍增时间，意味着该聚变电站不仅能自我维持，还能为启动新的电站提供额外的氚燃料。这是实现聚变能源规模化发展的关键。

## 4. 约束求解指标 

- **计算方法**: `bisection_search` (在 `tricys.simulation.simulation_analysis` 中实现)
- **物理意义**: 在许多设计研究中，我们关心的不是在固定的氚增殖比（Tritium Breeding Ratio, TBR）下系统的性能如何，而是反过来：**为了达到某个特定的工程目标（例如，倍增时间小于10年），我们所需要的最低TBR是多少？**
- **约束求解任务**。
    -   当您在 `dependent_variables` 中包含它时，`tricys` 会启用一个优化算法（如[二分查找](../../guides/tricys_analysis/multi_parameter_sensitivity_analysis.md#2-高级用法目标寻求分析) `bisection_search`）。
    -   该算法会以 `parameter_to_optimize`（通常是模型中的 `TBR` 参数）为变量，在给定的 `search_range` 内反复迭代运行仿真。
    -   在每次迭代中，它会检查关键性能指标（例如 `Doubling_Time`）是否满足预设的约束条件（例如小于某个 `metric_max_value`）。
    -   最终，算法会收敛并输出满足约束条件的**最小TBR值**。
- **解读**: 这个“反向”求解的能力非常强大。它将设计问题从“正向验证”转变为“逆向寻优”，帮助工程师快速确定实现关键性能目标所需的最低设计要求，极大地加速了设计迭代过程。
